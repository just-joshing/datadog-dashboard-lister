name: Datadog Dashboard Lister

on: [push, workflow_dispatch]

jobs:
  datadog_dashboard_lister_job:
    runs-on: ubuntu-latest
    name: A job to list datadog dashboards
    steps:
    - name: Datadog Dashboard Lister action step
      id: dd-dashboard-lister
      uses: just-joshing/datadog-dashboard-lister@main
      with:
        datadog-api-key: "${{ secrets.DD_API_KEY }}"
        datadog-app-key: "${{ secrets.DD_APP_KEY }}"
        filter-titles-by-keywords: '["token"]'
    - name: Publish dashboard
      run: |
        echo 'Dashboards: ${{ steps.dd-dashboard-lister.outputs.dashboards }}'
